{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Room Model Details</title>
    <link rel="stylesheet" href="{% static 'home/css/dashboard.css' %}" />
    <link rel="stylesheet" href="{% static 'home/css/nav.css' %}" />
    <style>
      .detail-container {
        max-width: 1200px;
        margin: 2rem auto;
        padding: 2rem;
        background: white;
        border-radius: 12px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .room-content {
        display: flex;
        flex-direction: column; /* Stack vertically on small screens */
      }

      @media (min-width: 768px) {
        .room-content {
          flex-direction: row; /* Horizontal layout on larger screens */
        }
      }

      .media-section {
        flex: 1;
        margin-right: 2rem; /* Add space between sections */
      }

      .room-info {
        flex: 1;
        padding: 1.5rem;
      }

      .room-info h1 {
        color: #2d3748;
        font-size: 2rem;
        margin-bottom: 1.5rem;
        font-weight: 700;
      }

      .info-item {
        margin: 1rem 0;
        color: #4a5568;
        font-size: 1.1rem;
        line-height: 1.6;
      }

      .info-item strong {
        color: #2d3748;
        font-weight: 600;
      }

      .color-scheme {
        display: flex;
        gap: 0.5rem;
        margin-top: 0.5rem;
        flex-wrap: wrap;
      }

      .color-circle {
        width: 30px;
        height: 30px;
        border-radius: 50%;
        border: 2px solid #bbbbbb;
        cursor: pointer;
        transition: transform 0.2s;
      }

      .color-circle:hover {
        transform: scale(1.1);
      }

      .main-image-container {
        margin-bottom: 1rem;
        position: relative;
        border-radius: 8px;
        overflow: hidden;
      }

      .main-image-container svg {
        width: 100%;
        height: auto;
        cursor: pointer;
        transition: transform 0.3s ease;
      }

      .preview-images {
        display: flex;
        gap: 1rem;
        overflow-x: auto;
        padding: 0.5rem 0;
        white-space: nowrap;
      }

      .preview-image {
        max-width: 225px;
        width: auto;
        height: auto;
        border-radius: 8px;
      }

      .preview-image:hover {
        transform: scale(1.05);
      }

      .back-button {
        display: inline-block;
        padding: 0.75rem 1.5rem;
        background-color: #108b1c;
        color: white;
        text-decoration: none;
        border-radius: 6px;
        margin-top: 2rem;
        transition: background-color 0.2s;
        font-weight: 500;
      }

      .back-button:hover {
        background-color: #0d7216;
      }

      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.9);
        z-index: 1000;
        justify-content: center;
        align-items: center;
      }

      .modal-contentt {
        max-width: 90%;
        max-height: 90vh;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .modal-contentt img {
        width: 100%;
        height: auto;
        max-height: 90vh;
        object-fit: contain;
      }

      .close-modal {
        position: absolute;
        top: 20px;
        right: 30px;
        color: white;
        font-size: 30px;
        cursor: pointer;
      }

      .clickable-area {
        fill: transparent;
        stroke: transparent;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .clickable-area:hover {
        stroke: rgb(33, 175, 33);
        stroke-width: 10px;
        opacity: 0.5;
      }

      @media (max-width: 768px) {
        .preview-images {
          flex-wrap: nowrap;
        }

        .preview-image {
          overflow-x: scroll;
        }

        .room-info h1 {
          font-size: 1.5rem; /* Adjust font size for smaller screens */
        }

        .info-item {
          font-size: 1rem; /* Adjust font size for smaller screens */
        }
      }

      @media (max-width: 480px) {
        .preview-image {
          max-width: 100px;
        }
      }
    </style>
  </head>
  <body>
    <header class="header-dash">
      <nav>
        <!-- ... keep existing code (nav content) ... -->
      </nav>
    </header>

    <div class="detail-container">
      <!-- <img
        src="{% static 'home/pics/' %}{{ room_model.image }}"
        alt="{{ room_model.name }}"
        class="room-image"
      /> -->
      <div class="room-content">
        <div class="media-section">
          <div class="main-image-container">
            {% if room_model.image == "1731549672526.png" %}
            <svg
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink"
              viewBox="0 0 2880 1800"
            >
              <image
                xlink:href="{% static 'home/pics/' %}{{ room_model.image }}"
                style="width: 2880px"
              />
              <polygon
                class="clickable-area"
                data-room-id="6739a61e1bcaefb02dffdcea"
                points="216.615 1102.77 308.513 1063.38 406.974 1050.26 790.974 958.359 836.923 1102.77 994.462 1168.41 1145.44 1234.05 1260.31 1283.28 1375.18 1201.23 1460.51 1204.51 1522.87 1250.46 1555.69 1316.1 1522.87 1388.31 1486.77 1450.67 1473.64 1604.92 1293.13 1788.72 1148.72 1788.72 577.641 1795.28 443.077 1631.18 354.462 1503.18 256 1375.18 170.667 1273.44 147.692 1171.69"
              />
              <polygon
                class="clickable-area"
                data-room-id="673a34701280d354f043f966"
                points="1714.16 1289.13 1819.54 1383.97 1942.48 1320.75 2012.73 1243.47 2005.71 1141.6 2030.3 1081.89 2030.3 1025.69 1977.61 980.022 1924.92 987.047 1816.03 1064.32 1731.72 1057.3 1643.91 1106.48 1615.81 1194.29 1626.34 1285.62"
              />
              <polygon
                class="clickable-area"
                data-room-id="673a35131280d354f043f96f"
                points="1752.8 755.214 1816.03 642.81 1826.56 628.76 1960.04 677.936 1924.92 811.416 1924.92 965.971 1903.84 811.416"
              />
            </svg>
            {% elif room_model.image == "1731551088665.png" %}
            <svg
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink"
              viewBox="0 0 2880 1800"
            >
              <image
                xlink:href="{% static 'home/pics/' %}{{ room_model.image }}"
                style="width: 2880px"
              />
              <polygon
                class="clickable-area"
                data-room-id="6739a90a1bcaefb02dffdcfd"
                points="737.547 1149.94 1070.63 943.742 1173.73 967.534 1185.63 1145.97 939.777 1411.65 797.026 1372"
              />
            </svg>
            {% endif %}
          </div>

          <div class="preview-images">
            {% if room_model.image == "1731549672526.png" %}
            <img
              src="{% static 'home/pics/roomModels/lr2.png' %}"
              alt="Room Preview"
              class="preview-image"
              onclick="openModal(this.src)"
            />
            <img
              src="{% static 'home/pics/roomModels/lr3.png' %}"
              alt="Room Preview"
              class="preview-image"
              onclick="openModal(this.src)"
            />
            <img
              src="{% static 'home/pics/roomModels/lr4.png' %}"
              alt="Room Preview"
              class="preview-image"
              onclick="openModal(this.src)"
            />
            {% elif room_model.image == "1731551088665.png" %}
            <img
              src="{% static 'home/pics/roomModels/2.png' %}"
              alt="Room Preview"
              class="preview-image"
              onclick="openModal(this.src)"
            />
            <img
              src="{% static 'home/pics/roomModels/3.png' %}"
              alt="Room Preview"
              class="preview-image"
              onclick="openModal(this.src)"
            />
            <img
              src="{% static 'home/pics/roomModels/4.png' %}"
              alt="Room Preview"
              class="preview-image"
              onclick="openModal(this.src)"
            />
            {% endif %}
          </div>
        </div>

        <div class="room-info">
          <h1>{{ room_model.name }}</h1>
          <div class="info-item">
            <strong>Description:</strong><br />
            {{ room_model.description }}
          </div>
          <div class="info-item">
            <strong>Type:</strong> {{ room_model.type }}
          </div>
          <div class="info-item">
            <strong>Theme:</strong> {{ room_model.theme|join:", " }}
          </div>
          <div class="info-item">
            <strong>Color Scheme:</strong>
            <div class="color-scheme">
              {% for color in room_model.colorscheme %}
              <div
                class="color-circle"
                style="background-color: {{ color }};"
                title="{{ color }}"
              ></div>
              {% endfor %}
            </div>
          </div>
          <a href="{% url 'dashboard' %}" class="back-button"
            >Back to Gallery</a
          >
        </div>
      </div>
    </div>

    <!-- Image Modal -->
    <div id="imageModal" class="modal" onclick="closeModal()">
      <span class="close-modal">&times;</span>
      <div class="modal-contentt">
        <img id="modalImage" src="" alt="Enlarged room image" />
      </div>
    </div>

    <script src="{% static 'home/js/cart.js' %}"></script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const polygons = document.querySelectorAll(".clickable-area");

        polygons.forEach((polygon) => {
          polygon.addEventListener("click", function () {
            const roomId = this.getAttribute("data-room-id");
            if (roomId) {
              window.location.href = `/roomFurnitures/${roomId}/`;
            }
          });
        });
      });

      function openModal(imageSrc) {
        const modal = document.getElementById("imageModal");
        const modalImg = document.getElementById("modalImage");
        modal.style.display = "flex";
        modalImg.src = imageSrc;
      }

      function closeModal() {
        document.getElementById("imageModal").style.display = "none";
      }

      // Close modal when pressing escape key
      document.addEventListener("keydown", function (event) {
        if (event.key === "Escape") {
          closeModal();
        }
      });

      // Prevent modal from closing when clicking on the image
      document
        .querySelector(".modal-contentt")
        .addEventListener("click", function (event) {
          event.stopPropagation();
        });
    </script>
  </body>
</html>
